"use strict";(self["webpackChunkfinn_front"]=self["webpackChunkfinn_front"]||[]).push([[768],{7893:function(t,e,o){var i=o(5873),n=o(3713),s=(0,n.a0)({props:{elementAttr:Object,height:[Function,Number,String],hint:String,indicatorSrc:String,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,visible:Boolean,width:[Function,Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:elementAttr":null,"update:height":null,"update:hint":null,"update:indicatorSrc":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:rtlEnabled":null,"update:visible":null,"update:width":null},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=i.A,this.$_hasAsyncTemplate=!0}});e.A=s},1196:function(t,e,o){o.d(e,{A:function(){return Q}});var i=o(4311),n=o(405),s=o(5478),a=o(6674),l=o(9394),d=o(1137),r=o(850),u=o(9535),c=o(5596),h=o(7049),p=o(4436),f=o(198),g=o(7424),m=c.A.add,b="dx-toast",v=b+"-",w=v+"wrapper",x=v+"content",y=v+"message",k=v+"icon",_="dxToast",C=["info","warning","error","success"],A=[],F=8e3,T={top:{my:"top",at:"top",of:null,offset:"0 0"},bottom:{my:"bottom",at:"bottom",of:null,offset:"0 -20"},center:{my:"center",at:"center",of:null,offset:"0 0"},right:{my:"center right",at:"center right",of:null,offset:"0 0"},left:{my:"center left",at:"center left",of:null,offset:"0 0"}},S={h:0,v:0},B=20;m((function(){u.A.subscribeGlobal(r.A.getDocument(),h.A.down,(function(t){for(var e=A.length-1;e>=0;e--)if(!A[e]._proxiedDocumentDownHandler(t))return}))}));var O=f.A.inherit({_getDefaultOptions:function(){return(0,s.X)(this.callBase(),{message:"",type:"info",displayTime:2e3,position:"bottom center",animation:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},shading:!1,height:"auto",hideTopOverlayHandler:null,preventScrollEvents:!1,closeOnSwipe:!0,closeOnClick:!1})},_defaultOptionsRules:function(){var t={displayTime:(0,g.Nt)()?4e3:2e3,hideOnOutsideClick:!0,animation:{show:{type:"fade",duration:200,from:0,to:1},hide:{type:"fade",duration:200,from:1,to:0}}};return this.callBase().concat([{device:t=>"phone"===t.deviceType,options:(0,d.A)({width:"calc(100vw - ".concat(2*B,"px)")},t)},{device:t=>"tablet"===t.deviceType,options:(0,d.A)({width:"auto",maxWidth:"80vw"},t)},{device:t=>(0,g.Nt)()&&"desktop"===t.deviceType,options:{minWidth:344,maxWidth:568,displayTime:4e3}}])},_init:function(){this.callBase(),this._posStringToObject()},_renderContentImpl:function(){this._message=(0,i.A)("<div>").addClass(y).text(this.option("message")).appendTo(this.$content()),this.setAria("role","alert",this._message),C.includes(this.option("type").toLowerCase())&&this.$content().prepend((0,i.A)("<div>").addClass(k)),this.callBase()},_render:function(){this.callBase(),this.$element().addClass(b),this.$wrapper().addClass(w),this.$content().addClass(v+String(this.option("type")).toLowerCase()),this.$content().addClass(x),this._toggleCloseEvents("Swipe"),this._toggleCloseEvents("Click")},_toggleCloseEvents:function(t){var e="dx"+t.toLowerCase();u.A.off(this.$content(),e),this.option("closeOn"+t)&&u.A.on(this.$content(),e,this.hide.bind(this))},_posStringToObject:function(){if((0,a.Kg)(this.option("position"))){var t=this.option("position").split(" ")[0],e=this.option("position").split(" ")[1];switch(this.option("position",(0,s.X)({boundaryOffset:S},T[t])),e){case"center":case"left":case"right":this.option("position").at+=" "+e,this.option("position").my+=" "+e}}},_show:function(){return this.callBase.apply(this,arguments).always(function(){clearTimeout(this._hideTimeout),this._hideTimeout=setTimeout(this.hide.bind(this),this.option("displayTime"))}.bind(this))},_overlayStack:function(){return A},_zIndexInitValue:function(){return this.callBase()+F},_dispose:function(){clearTimeout(this._hideTimeout),this.callBase()},_optionChanged:function(t){switch(t.name){case"type":this.$content().removeClass(v+t.previousValue),this.$content().addClass(v+String(t.value).toLowerCase());break;case"message":this._message&&this._message.text(t.value);break;case"closeOnSwipe":this._toggleCloseEvents("Swipe");break;case"closeOnClick":this._toggleCloseEvents("Click");break;case"displayTime":break;default:this.callBase(t)}}});(0,p.A)(_,O);var D=O,W=D,$=(0,l.zk)(),H=null,I={};function M(t,e,o){var l=(0,a.Qd)(t)?t:{message:t},d=(0,a.Qd)(e)?e:void 0,r=(0,a.Qd)(e)?void 0:e,{onHidden:u}=l;if(null!==d&&void 0!==d&&d.position){var{position:c}=d,h=d.direction||E(c),p=(0,a.Kg)(c)?c:"".concat(c.top,"-").concat(c.left,"-").concat(c.bottom,"-").concat(c.right),{onShowing:f}=l,g=L(p);R(g,h),(0,s.X)(l,{container:g,_skipContentPositioning:!0,onShowing:function(t){X(g,h,c),null===f||void 0===f||f(t)}})}(0,s.X)(l,{type:r,displayTime:o,onHidden:function(t){(0,i.A)(t.element).remove(),null===u||void 0===u||u(t)}}),H=(0,i.A)("<div>").appendTo((0,n.Uq)()),new W(H,l).show()}var E=t=>(0,a.Kg)(t)&&t.includes("top")?"down-push":"up-push",N=t=>{var e=(0,i.A)("<div>").appendTo((0,n.Uq)());return I[t]=e,e},L=t=>{var e=I[t];return e||N(t)},R=(t,e)=>{var o="dx-toast-stack dx-toast-stack-".concat(e,"-direction");t.removeAttr("class").addClass(o)},X=(t,e,o)=>{var{offsetWidth:i,offsetHeight:n}=t.children().first().get(0),s={toastWidth:i,toastHeight:n,windowHeight:$.innerHeight,windowWidth:$.innerWidth},l=(0,a.Kg)(o)?z(o,s):o,d=K(e,l,s);t.css(d)},z=(t,e)=>{var{toastWidth:o,toastHeight:i,windowHeight:n,windowWidth:s}=e;switch(t){case"top left":return{top:10,left:10};case"top right":return{top:10,right:10};case"bottom left":return{bottom:10,left:10};case"bottom right":return{bottom:10,right:10};case"top center":return{top:10,left:Math.round(s/2-o/2)};case"left center":return{top:Math.round(n/2-i/2),left:10};case"right center":return{top:Math.round(n/2-i/2),right:10};case"center":return{top:Math.round(n/2-i/2),left:Math.round(s/2-o/2)};case"bottom center":default:return{bottom:10,left:Math.round(s/2-o/2)}}},K=(t,e,o)=>{var i,n,s,a,l,d,r,u,c,h,p,f,{toastWidth:g,toastHeight:m,windowHeight:b,windowWidth:v}=o;switch(t.replace(/-push|-stack/g,"")){case"up":return{bottom:null!==(i=e.bottom)&&void 0!==i?i:b-m-e.top,top:"",left:null!==(n=e.left)&&void 0!==n?n:"",right:null!==(s=e.right)&&void 0!==s?s:""};case"down":return{top:null!==(a=e.top)&&void 0!==a?a:b-m-e.bottom,bottom:"",left:null!==(l=e.left)&&void 0!==l?l:"",right:null!==(d=e.right)&&void 0!==d?d:""};case"left":return{right:null!==(r=e.right)&&void 0!==r?r:v-g-e.left,left:"",top:null!==(u=e.top)&&void 0!==u?u:"",bottom:null!==(c=e.bottom)&&void 0!==c?c:""};case"right":return{left:null!==(h=e.left)&&void 0!==h?h:v-g-e.right,right:"",top:null!==(p=e.top)&&void 0!==p?p:"",bottom:null!==(f=e.bottom)&&void 0!==f?f:""}}},Q=M},9131:function(t,e,o){o.d(e,{A:function(){return i}});class i{constructor(t,e,o,i,n,s){this.id=t,this.login=e,this.password=o,this.firstName=i,this.lastName=n,this.patronymic=s}}},4243:function(t,e,o){o.r(e),o.d(e,{default:function(){return x}});var i=o(641),n=o(3751);const s={class:"login-link"},a={class:"dx-button-text"},l={key:1};function d(t,e,o,d,r,u){const c=(0,i.g2)("dx-required-rule"),h=(0,i.g2)("dx-label"),p=(0,i.g2)("dx-item"),f=(0,i.g2)("dx-custom-rule"),g=(0,i.g2)("dx-button-options"),m=(0,i.g2)("dx-button-item"),b=(0,i.g2)("router-link"),v=(0,i.g2)("dx-loadIndicator"),w=(0,i.g2)("dx-form");return(0,i.uX)(),(0,i.CE)("form",{class:"create-account-form",onSubmit:e[0]||(e[0]=(0,n.D$)(((...t)=>u.handleRegister&&u.handleRegister(...t)),["prevent"]))},[(0,i.bF)(w,{"form-data":r.user,disabled:r.loading},{createAccount:(0,i.k6)((()=>[(0,i.Lk)("div",null,[(0,i.Lk)("span",a,[r.loading?((0,i.uX)(),(0,i.Wv)(v,{key:0,width:"24px",height:"24px",visible:!0})):(0,i.Q3)("",!0),r.loading?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("span",l,"Создать аккаунт"))])])])),default:(0,i.k6)((()=>[(0,i.bF)(p,{"data-field":"login","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Логин",mode:"text"}},{default:(0,i.k6)((()=>[(0,i.bF)(c,{message:"Введите логин"}),(0,i.bF)(h,{visible:!1})])),_:1}),(0,i.bF)(p,{"data-field":"password","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Пароль",mode:"password"}},{default:(0,i.k6)((()=>[(0,i.bF)(c,{message:"Введите пароль"}),(0,i.bF)(h,{visible:!1})])),_:1}),(0,i.bF)(p,{"data-field":"confirmedPassword","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Подтвердите пароль",mode:"password"}},{default:(0,i.k6)((()=>[(0,i.bF)(c,{message:"Введите пароль"}),(0,i.bF)(f,{message:"Пароли не совпадают","validation-callback":u.confirmPassword},null,8,["validation-callback"]),(0,i.bF)(h,{visible:!1})])),_:1}),(0,i.bF)(p,{"data-field":"firstName","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Имя",mode:"text"}},{default:(0,i.k6)((()=>[(0,i.bF)(c,{message:"Введите имя"}),(0,i.bF)(h,{visible:!1})])),_:1}),(0,i.bF)(p,{"data-field":"lastName","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Фамилия",mode:"text"}},{default:(0,i.k6)((()=>[(0,i.bF)(c,{message:"Введите фамилию"}),(0,i.bF)(h,{visible:!1})])),_:1}),(0,i.bF)(p,{"data-field":"patronymic","editor-type":"dxTextBox","editor-options":{stylingMode:"filled",placeholder:"Отчество",mode:"text"}},{default:(0,i.k6)((()=>[(0,i.bF)(c,{message:"Введите отчество"}),(0,i.bF)(h,{visible:!1})])),_:1}),(0,i.bF)(p,null,{default:(0,i.k6)((()=>[])),_:1}),(0,i.bF)(m,null,{default:(0,i.k6)((()=>[(0,i.bF)(g,{width:"100%",type:"default",template:"createAccount","use-submit-behavior":!0})])),_:1}),(0,i.bF)(p,null,{default:(0,i.k6)((()=>[(0,i.Lk)("div",s,[(0,i.eW)(" Уже есть учетная запись? "),(0,i.bF)(b,{to:"/login-form"},{default:(0,i.k6)((()=>[(0,i.eW)("Войти")])),_:1})])])),_:1})])),_:1},8,["form-data","disabled"])],32)}o(4114);var r=o(5463),u=o(7893),c=o(1196),h=o(9131),p=o(3449),f=o(3783),g=o(4335),m=o(6478),b={name:"register-form",data(){return{user:new h.A("","","","",""),loading:!1,message:""}},computed:{loggedIn(){return p.A.state.auth.status.loggedIn}},mounted(){this.loggedIn&&this.router.push("/profile-page")},methods:{handleRegister(){this.message="",this.loading=!0,p.A.dispatch("auth/register",this.user).then((t=>{this.message=t.message,this.loading=!0,void 0!==t.id&&g.A.post(m.H.users,{id:t.id,login:t.login,firstname:t.firstName,lastname:t.lastName,patronymic:t.patronymic},{}),f.A.push("/profile-page")}),(t=>{this.message=t.response&&t.response.data||t.message||t.toString(),""!==this.message&&(0,c.A)(this.message,"error",2e3),this.loading=!1}))},confirmPassword(t){return t.value===this.user.password}},components:{DxLoadIndicator:u.A,DxForm:r.Ay,DxRequiredRule:r.az,DxCustomRule:r.CC,DxItem:r.KV,DxLabel:r.jd,DxButtonItem:r.I,DxButtonOptions:r.$3}},v=o(6262);const w=(0,v.A)(b,[["render",d]]);var x=w}}]);
//# sourceMappingURL=login2.9b77aced.js.map